| Лабораторная работа №2     |  24Б10                      | Архитектура компьютера |
| :------------------------- | --------------------------- | ---------------------- |
| Построение логических схем | Согоян Вазген Айкович       | 2024                   |

## Инструментарий
> Указываем свою версию icarus verilog

## Вариант
> Указываем что было выполнено.

# Описание

### Теоретические обоснования

Назовем крайними случаями следующие входы:
- sqrt(+inf) = +inf
- sqrt(-inf) = qNaN
- sqrt(-nonzero) = qNaN
- sqrt(+-0) = +-0
- sqrt(NaN) = тот же NaN, но утихомиренный

В любом другом случае на вход получаем положительное число x: +0 < x < +inf.
Оно может быть денорм или норм.
Рассмотрим минимальное денорм число: 2^(-24):
sqrt(2^(-24)) = 2^(-12) - нормальное. Это хорошо. Для любого некрайнего случая ответ нормальный.

Поймем следующий факт: 
Старшая единица числа M на 10 бите (начиная с нуля) <=> старшая единица числа M^2 на 20 или 21 бите.
Так как 2^10 <= M < 2^11 <=> 2^20 <= M^2 < 2^22.

1. Нормальное число

1.M * 2^(E-15) - фактическое число, которое записано в half precision как 0EM (E - 5 бит, M - 10 бит).

sqrt( 1.M * 2^(E-15) ) = sqrt( 1.M ) * 2^( (E-15)/2 ) = sqrt( 1.M ) * 2^( (E-1)/2 - 7 )

Тогда если E будет четно, мы вычтем из E единицу и сдвигаем мантиссу. И все хорошо. 

Экспонента результата (сдвинутая) будет иметь вид (E-1)/2 + 8

Мантиссу результата считаем так:
- приписываем 10 нулей в конец числа
- получаем число длиной 21-22 бита
- берем корень итеративно из этого число
- получаем число длиной 11 бит, старшая единица попадает в старшее место
- убираем старшую единицы и эти 10 бит записываем в мантиссу ответа

2. Денормальное число

0.M * 2^(-14) = М * 2^(-24) - фактическое число.

Нормализуем экспоненту и мантиссу.
Возвращаясь в структурное программирование, алгоритм действий таков:
```cpp
e = 1;
while (10 бит (начиная с нуля) равен 0) {
    m <<= 1;
    e--;
}
```

Чтобы всегда оставаться в unsigned числах, делаю я чуть другое.
- в схемах нахожу место старшего бита мантиссы (создал специальную схему для этого, легко)
- рассчитываю, насколько сдвинуть мантиссу нужно - пусть будет shift
  - то есть для мантиссы 0010010110 нужно получить 10010110000
  - в данном случае shift = 3, а старшая единица изначально была на месте 7
- экспонента итоговая будет равна 8 - shift/2
- тогда нужно держать shift четным:
  - если shift нечетный, то прибавим в shift единицу и сдвинем мантиссу влево
- мантиссу считем так же: приписываем 10 нулей и берем корень

### Logisim

> Раздел, в котором вы описываете свою реализацию:
> 
> Что за схема вам дана, как она работает.
> 
> Как она была реализована (как "под капотом" работает ваша схема).
> 
> Если в вашей схеме реализованы также (де)мультиплексоры, триггеры и прочие непростые логических схемы, то нужно также расписать как они работают и зачем были использованы (коротко: что это такое и принцип работы, можно приводить таблицы истинности и временные диаграммы).
> 
> Нужно описать как работают входовыходы.
> 
> Отдельно описать особенности сборки на Logisim, отдельно – на SystemVerilog.
>
> Какие конструкции Logisim использовались в работе и почему? Особенно это важно в реализации.
> Какие конструкции Verilog использовались в работе и почему? Особенно это важно в реализации.
>
> Все схемы должны работать одинаково!! Поэтому в отчёте должно быть раскрыто, как разботает каждая схема и доказательство, что поведение у них одинаковое.

### Примечания по оформлению (можно удалить после создания отчёта)

1. Не нужно вставлять своё описание как quote (цитату).
2. Старайтесь также разбивать ваш текст на логические разделы и отделять мысли заголовками.
3. Если хочется вставить фрагменты кода, то делаете это блоком кода. Если же ссылаетесь на код, то рекомендуется это делать через permalink на файлы в репозитории.
4. Можно пользоваться всеми возможностями Github Markdown.
5. Никаких фоток в отчёте, ровно как и скринов полного экрана. Это больно смотреть \(
6. Если вы хотите вставить изображение из сети, то не нужно его грузить в репозиторий.
7. В случае описание подсхем Logisim, если вы просто ссылаетесь на подсхему в целом, то достаточно указать назвнаие подсхемы из проекта. Если же вы описываете какой-то небольшой фрагмент схемы, то лучше его вставить в виде рисунка в отчёт.
